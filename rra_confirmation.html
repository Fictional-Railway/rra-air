<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="ja">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=Shift_JIS">
<title>予約内容最終確認|琉球リゾート航空</title>

<style type="text/css">
/* --- スタイルは既存ページと共通 (省略) --- */
body { font-family: "MS Pゴシック", "MS PGothic", "ヒラギノ角ゴ Pro W3", sans-serif; font-size: 12px; line-height: 1.5; background-color: #FFFFFF; margin: 0; padding: 0; }
table.main-layout { width: 760px; border: 0; border-spacing: 0; border-collapse: collapse; background-color: #FFFFFF; }
.header-top { padding: 10px; border-bottom: 3px solid #000080; }
.logo-text { font-size: 28px; font-weight: bold; color: #000080; font-family: "Arial Black", sans-serif; }
.logo-subtext { font-size: 12px; font-weight: bold; color: #CC0000; }
.global-nav { background-color: #EEEEFF; border-bottom: 1px solid #999999; padding: 5px; text-align: center; font-size: 11px; }
.global-nav a { color: #0000CC; text-decoration: none; }
.global-nav a:hover { color: #FF0000; text-decoration: underline; }
.left-nav { width: 180px; padding: 10px; background-color: #F0F0F0; border-right: 1px dashed #999999; }
.left-nav h4 { font-size: 13px; font-weight: bold; color: #FFFFFF; background-color: #0055AA; padding: 3px; margin-top: 10px; margin-bottom: 5px; }
.left-nav ul { margin: 0 0 10px 15px; padding: 0; list-style-type: square; }
.left-nav li { margin-bottom: 5px; }
.main-content { padding: 15px; }
.main-content h3 { font-size: 16px; color: #000080; border-bottom: 2px solid #000080; }
.footer { border-top: 1px solid #999999; padding: 10px; text-align: center; font-size: 10px; color: #666666; }

/* --- 確認画面専用スタイル --- */
table.confirm-data { width: 100%; border-collapse: collapse; border: 1px solid #0055AA; margin-bottom: 15px; }
table.confirm-data caption { background-color: #0055AA; color: #FFFFFF; font-size: 14px; font-weight: bold; padding: 5px; }
table.confirm-data th { background-color: #E0E0FF; padding: 8px; border: 1px solid #999999; text-align: left; width: 150px; }
table.confirm-data td { padding: 8px; border: 1px solid #CCCCCC; background-color: #FFFFFF; }
.total-price { font-size: 16px; color: #CC0000; font-weight: bold; }
.confirm-button { 
    font-weight: bold; 
    padding: 10px 20px; 
    background-color: #FFDDDD;
    border: 3px outset #CC0000; 
    cursor: pointer; 
    font-size: 14px;
}
.confirm-button:active { border-style: inset; }
.edit-button { 
    font-weight: bold; 
    padding: 8px 15px; 
    background-color: #DDDDDD;
    border: 2px outset #999999; 
    cursor: pointer; 
    font-size: 13px;
}
</style>
</head>

<body bgcolor="#FFFFFF" text="#000000" link="#0000CC" vlink="#800080">

<table class="main-layout" align="center" bgcolor="#999999" cellspacing="1" cellpadding="0">
    
    <tr bgcolor="#FFFFFF">
        <td colspan="2" class="header-top">
            <span class="logo-text">RRA 琉球リゾート航空</span><br>
            <span class="logo-subtext">"沖縄の翼、虹の架け橋"</span>
        </td>
    </tr>
    
    <tr bgcolor="#EEEEFF">
        <td colspan="2" class="global-nav">
            <font size="2">
                <b>[ <a href="./index.html">ホーム</a> ]</b>
                | <b>[ <a href="./flight-info.html">運航情報</a> ]</b>
                | <b>[ <a href="#">時刻表</a> ]</b>
                | <b>[ <a href="#">運賃案内</a> ]</b>
                | <b>[ <a href="#">会社概要</a> ]</b>
                | <b>[ <a href="#">English</a> ]</b>
            </font>
        </td>
    </tr>

    <tr>
        <td class="left-nav" valign="top">
            <h4>■ 空席照会・ご予約</h4>
            <ul><li><a href="#">国内線予約</a></li><li><a href="#">予約確認・変更</a></li></ul>
            <h4>■ RRAマイレージ</h4>
            <ul><li><a href="#">ログイン</a></li><li><a href="#">新規入会</a></li></ul>
            <h4>■ ツアー情報 <span class="blinking-new">New!</span></h4>
            <ul><li><a href="#">石垣・宮古 島旅</a></li><li><a href="#">那覇フリープラン</a></li></ul>
            <h4>■ 便利な情報</h4>
            <ul><li><a href="#">機材・シート紹介</a></li><li><a href="#">お問い合わせ</a></li><li><a href="#">サイトマップ</a></li></ul>
            <br><p align="center">
                <a href="http://www.w3.org/html/logo/">
                <img src="https://www.w3.org/Icons/valid-html401" alt="Valid HTML 4.01!" height="31" width="88" border="0">
                </a>
            </p>
        </td>

        <td class="main-content" valign="top">
            
            <h3><font color="#000080">ご予約（ステップ 3/3）最終確認画面</font></h3>

            <font color="red" size="2">
            **【重要】** 下記の内容をよくご確認の上、「予約を確定する」ボタンを押してください。<br>
            確定後の変更には手数料が発生する場合がございます。
            <hr size="1">
            </font>
            
            <form action="javascript:alert('ご予約を確定いたしました。\n予約番号は J01234567 です。\nありがとうございました！');" method="POST">

            
            <table class="confirm-data" cellpadding="5" cellspacing="0">
                <caption>ご予約内容の確認</caption>
                <tr>
                    <th>便名・区間</th>
                    <td id="flight-summary-no">便情報を読み込み中...</td>
                </tr>
                <tr>
                    <th>搭乗日</th>
                    <td id="flight-summary-date">2025年 11月 18日 (日)</td> 
                </tr>
                <tr>
                    <th>運賃</th>
                    <td>リゾート割（片道）</td>
                </tr>
                <tr>
                    <th>合計料金</th>
                    <td><span class="total-price">￥19,800</span> （大人 1名様）</td>
                </tr>
            </table>

            
            <table class="confirm-data" cellpadding="5" cellspacing="0">
                <caption>ご入力いただいたお客様情報</caption>
                <tr>
                    <th>氏名 (漢字/カナ)</th>
                    <td id="confirm-name">...</td> 
                </tr>
                <tr>
                    <th>性別・生年月日</th>
                    <td id="confirm-personal">...</td> 
                </tr>
                <tr>
                    <th>電話番号</th>
                    <td id="confirm-tel">...</td> 
                </tr>
                <tr>
                    <th>メールアドレス</th>
                    <td id="confirm-email">...</td> 
                </tr>
            </table>

            
            <table class="confirm-data" cellpadding="5" cellspacing="0">
                <caption>お支払い情報</caption>
                <tr>
                    <th>お支払い方法</th>
                    <td>クレジットカード</td>
                </tr>
                <tr>
                    <th>カード番号</th>
                    <td id="confirm-cc-no">...</td> 
                </tr>
                <tr>
                    <th>有効期限</th>
                    <td id="confirm-cc-exp">...</td> 
                </tr>
            </table>

            <br>
            
            <p align="center">
                <input type="button" value=" 修正する " class="edit-button" onclick="window.history.back();">
                &nbsp;&nbsp;&nbsp;
                <input type="submit" value=" 予約を確定する " class="confirm-button">
            </p>

            </form>

        </td>
    </tr>
    
    <tr bgcolor="#FFFFFF">
        <td colspan="2" class="footer">
            <font size="1">
            (C) 1999-2025 Ryukyu Resort Airlines All Rights Reserved.<br>
            * このホームページは Internet Explorer 5.5 / Netscape 6 での閲覧を推奨します。
            </font>
        </td>
    </tr>

</table>

<script type="text/javascript">
// ------------------------------------------
// ▼▼▼ JSによる動的表示のためのデータ・関数 ▼▼▼
// ------------------------------------------

// 当時のJSでURLのパラメータを取得するために使われた簡易関数
function getParameterByName(name) {
    name = name.replace(/[\[\]]/g, "\\$&");
    var url = window.location.href;
    var regex = new RegExp("[?&]" + name + "(=([^&#]*)|&|#|$)"),
        results = regex.exec(url);
    if (!results) return null;
    if (!results[2]) return '';
    return decodeURIComponent(results[2].replace(/\+/g, " "));
}

// 予約情報の簡易マッピング (rra_passenger_info.htmlと同じものを利用)
var FLIGHT_MAP = {
    'RRA201': 'RRA201便 那覇 08:30 発 → 石垣 09:25 着',
    'RRA203': 'RRA203便 那覇 10:15 発 → 石垣 11:10 着',
    'RRA205': 'RRA205便 那覇 13:00 発 → 石垣 13:55 着',
    'RRA207': 'RRA207便 那覇 16:00 発 → 石垣 16:55 着',
    'RRA103': 'RRA103便 那覇 13:00 発 → 宮古 13:50 着',
    'RRA206': 'RRA206便 石垣 14:20 発 → 那覇 15:15 着',
    'RRA102': 'RRA102便 宮古 11:00 発 → 那覇 11:50 着',
    'RRA104': 'RRA104便 宮古 14:40 発 → 那覇 15:30 着'
};

// ------------------------------------------
// ▼▼▼ ページ読み込み時のメイン処理 ▼▼▼
// ------------------------------------------
window.onload = function() {
    
    // --- A. フライト情報の反映 ---
    var selectedFlight = getParameterByName('selected_flight');
    var flightDisplay = document.getElementById('flight-summary-no');
    
    if (flightDisplay && selectedFlight) {
        var flightInfo = FLIGHT_MAP[selectedFlight] || (selectedFlight + '便 (情報が見つかりません)');
        flightDisplay.innerHTML = flightInfo;
    } 
    
    // --- B. 搭乗日の反映 ---
    // ※rra_passenger_info.htmlで月日もhiddenで引き継いでいる前提とします
    var month = getParameterByName('month') || '11'; 
    var day = getParameterByName('day') || '18';
    var dateDisplay = document.getElementById('flight-summary-date');
    if (dateDisplay) {
        // 曜日情報がないため、ここでは日曜日と仮定
        dateDisplay.innerHTML = '2001年 ' + month + '月 ' + day + '日 (日)'; 
    }

    // --- C. お客様情報の反映 ---
    var lname = getParameterByName('lname') || '入力なし';
    var fname = getParameterByName('fname') || '入力なし';
    var lkana = getParameterByName('lkana') || '---';
    var fkana = getParameterByName('fkana') || '---';
    var gender = getParameterByName('gender');
    var birthY = getParameterByName('birth_y');
    var birthM = getParameterByName('birth_m');
    var birthD = getParameterByName('birth_d');
    var tel1 = getParameterByName('tel1') || '090';
    var tel2 = getParameterByName('tel2') || 'XXXX';
    var tel3 = getParameterByName('tel3') || 'XXXX';
    var email = getParameterByName('email');
    var cc1 = getParameterByName('cc1');
    var cc4 = getParameterByName('cc4'); // 最後の4桁だけ表示するため

    // 氏名
    document.getElementById('confirm-name').innerHTML = 
        lname + ' ' + fname + ' / ' + lkana + ' ' + fkana;

    // 性別・生年月日
    var genderText = gender === 'male' ? '男性' : (gender === 'female' ? '女性' : '未選択');
    document.getElementById('confirm-personal').innerHTML = 
        genderText + ' / ' + birthY + '年 ' + birthM + '月 ' + birthD + '日生';

    // 電話番号
    document.getElementById('confirm-tel').innerHTML = 
        tel1 + ' - ' + tel2 + ' - ' + tel3;
        
    // メールアドレス (セキュリティのため一部マスク)
    if (email) {
        var maskedEmail = email.split('@')[0].charAt(0) + '****@' + email.split('@')[1];
        document.getElementById('confirm-email').innerHTML = maskedEmail;
    } else {
        document.getElementById('confirm-email').innerHTML = '入力なし';
    }


    // --- D. 決済情報の反映 ---
    // カード番号 (最初の4桁と最後の4桁のみ表示。他はマスク)
    var ccNoText = '**** **** **** ****';
    if (cc1 && cc4) {
        ccNoText = cc1 + ' **** **** ' + cc4;
    }
    document.getElementById('confirm-cc-no').innerHTML = ccNoText;

    // 有効期限
    var expM = getParameterByName('exp_m');
    var expY = getParameterByName('exp_y');
    document.getElementById('confirm-cc-exp').innerHTML = 
        (expM || '--') + ' / ' + (expY || '--');

};
</script>

</body>
</html>