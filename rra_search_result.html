<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="ja">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=Shift_JIS">
<title>空席照会結果 | 琉球リゾート航空</title>

<style type="text/css">
/* --- 共通スタイル --- */
body { font-family: "MS Pゴシック", "MS PGothic", "ヒラギノ角ゴ Pro W3", sans-serif; font-size: 12px; line-height: 1.5; background-color: #FFFFFF; margin: 0; padding: 0; }
table.main-layout { width: 760px; border: 0; border-spacing: 0; border-collapse: collapse; background-color: #FFFFFF; }
.header-top { padding: 10px; border-bottom: 3px solid #000080; }
.logo-text { font-size: 28px; font-weight: bold; color: #000080; font-family: "Arial Black", sans-serif; }
.logo-subtext { font-size: 12px; font-weight: bold; color: #CC0000; }
.global-nav { background-color: #EEEEFF; border-bottom: 1px solid #999999; padding: 5px; text-align: center; font-size: 11px; }
.global-nav a { color: #0000CC; text-decoration: none; }
.global-nav a:hover { color: #FF0000; text-decoration: underline; }
.left-nav { width: 180px; padding: 10px; background-color: #F0F0F0; border-right: 1px dashed #999999; }
.left-nav h4 { font-size: 13px; font-weight: bold; color: #FFFFFF; background-color: #0055AA; padding: 3px; margin-top: 10px; margin-bottom: 5px; }
.left-nav ul { margin: 0 0 10px 15px; padding: 0; list-style-type: square; }
.left-nav li { margin-bottom: 5px; }
.main-content { padding: 15px; }
.main-content h3 { font-size: 16px; color: #000080; border-bottom: 2px solid #000080; }
.footer { border-top: 1px solid #999999; padding: 10px; text-align: center; font-size: 10px; color: #666666; }

/* --- 検索結果専用スタイル --- */
/* 検索結果テーブル */
table.flight-results-table { 
    width: 100%; 
    border-collapse: collapse; 
    border: 1px solid #999999; 
    margin-top: 10px; 
    font-size: 11px;
}
table.flight-results-table th {
    background-color: #E0E0FF; /* ヘッダーの背景色 */
    padding: 6px 3px;
    border: 1px solid #999999;
    font-weight: bold;
}
table.flight-results-table td {
    padding: 4px;
    border: 1px solid #CCCCCC;
    text-align: center;
}
.route-section-header {
    background-color:#F0F0F0;
    font-weight: bold;
    color: #0055AA;
    padding: 5px;
}
.price-box {
    background-color: #CCFFCC; /* 価格欄を強調 */
    font-weight: bold;
    color: #0055AA;
}
.reserve-button {
    font-size: 10px;
    padding: 2px 4px;
    background-color: #FFCC00;
    border: 1px outset #CC9900;
    cursor: pointer;
}

/* 空席状況の色 */
.status-available { color: green; font-weight: bold; }
.status-few { color: orange; }
.status-full { color: red; }
</style>
</head>

<body bgcolor="#FFFFFF" text="#000000" link="#0000CC" vlink="#800080" **onload="displayFlights();"**>

<table class="main-layout" align="center" bgcolor="#999999" cellspacing="1" cellpadding="0">
    
    <tr bgcolor="#FFFFFF">
        <td colspan="2" class="header-top">
            <span class="logo-text">RRA 琉球リゾート航空</span><br>
            <span class="logo-subtext">"沖縄の翼、虹の架け橋"</span>
        </td>
    </tr>
    
    <tr bgcolor="#EEEEFF">
        <td colspan="2" class="global-nav">
            <font size="2">
                <b>[ <a href="./index.html">ホーム</a> ]</b>
                | <b>[ <a href="./flight-info.html">運航情報</a> ]</b>
                | <b>[ <a href="./rra_timetable.html">時刻表</a> ]</b>
                | <b>[ <a href="./rra_fare_info.html">運賃案内</a> ]</b>
                | <b>[ <a href="./rra_about_us.html">会社概要</a> ]</b>
                | <b>[ <a href="#">English</a> ]</b>
            </font>
        </td>
    </tr>

    <tr>
        <td class="left-nav" valign="top">
            <h4>■ 空席照会・ご予約</h4>
            <ul>
                <li><a href="./index.html">国内線予約</a></li>
                <li><a href="#">予約確認・変更</a></li>
            </ul>
            <h4>■ RRAマイレージ</h4>
            <ul>
                <li><a href="./rra_login.html">ログイン</a></li>
                <li><a href="./rra_register.html">新規会員登録</a></li>
            </ul>
            <h4>■ 便利な情報</h4>
            <ul>
                <li><a href="#">機材・シート紹介</a></li>
                <li><a href="#">お問い合わせ</a></li>
            </ul>
            <br><p align="center">
                <a href="http://www.w3.org/html/logo/">
                <img src="https://www.w3.org/Icons/valid-html401" alt="Valid HTML 4.01!" height="31" width="88" border="0">
                </a>
            </p>
        </td>

        <td class="main-content" valign="top">
            
            <h3><font color="#000080">空席照会結果 (往路)</font></h3>
            
            <div **id="search-info"** style="border: 2px solid #0055AA; background-color:#E0E0FF; padding: 8px; margin-bottom:15px;">
                <font size="3" color="#000080"><b>検索条件: データを読み込み中...</b></font><br>
                <font size="2">（該当する便が見つからなかった場合は、下の時刻表を確認してください。）</font>
            </div>
            
            <table class="flight-results-table" cellpadding="0" cellspacing="0">
                <tr>
                    <th width="5%">便名</th>
                    <th width="10%">出発地</th>
                    <th width="10%">出発時刻</th>
                    <th width="10%">到着地</th>
                    <th width="10%">到着時刻</th>
                    <th width="10%">空席状況</th>
                    <th width="12%">通常運賃</th>
                    <th width="12%">割引運賃</th>
                    <th width="15%">予約</th>
                </tr>
                <tbody **id="flight-results-body"**>
                    <tr><td colspan="9" align="center">検索結果を読み込んでいます...</td></tr>
                </tbody>
                <tr>
                    <td colspan="9" align="center" style="background-color:#FFFFE0; padding:8px;">
                        <font size="2" color="#CC0000"><b>◎: 空席あり / △: 残りわずか / 満席: 予約不可</b></font>
                    </td>
                </tr>
            </table>
            <p align="center">
                <input type="button" value=" 戻る " class="submit-button" onclick="window.location.href='./index.html';">
            </p>


        </td>
    </tr>
    
    <tr bgcolor="#FFFFFF">
        <td colspan="2" class="footer">
            <font size="1">
            (C) 1999-2025 Ryukyu Resort Airlines All Rights Reserved.<br>
            * このホームページは Internet Explorer 5.5 / Netscape 6 での閲覧を推奨します。
            </font>
        </td>
    </tr>

</table>

<script>
// 空港コードと名称のマッピング
const airportNames = {
    'HND': '東京(羽田)', 'KIX': '大阪(関空)', 'CTS': '札幌(新千歳)',
    'OKA': '沖縄(那覇)', 'ISG': '石垣', 'MMY': '宮古', 'OGN': '与那国'
};

// 全便データ (静的に定義)
const flightData = [
    // 東京(HND) ⇔ 沖縄(OKA)
    { dep: 'HND', arr: 'OKA', flight: 'RRA801', time_dep: '08:00', time_arr: '10:45', status: '◎', price_norm: '39,000', price_disc: '19,800' },
    { dep: 'HND', arr: 'OKA', flight: 'RRA803', time_dep: '12:00', time_arr: '14:45', status: '△', price_norm: '42,000', price_disc: '22,800' },
    { dep: 'HND', arr: 'OKA', flight: 'RRA805', time_dep: '17:00', time_arr: '19:45', status: '◎', price_norm: '48,000', price_disc: '25,800' },
    { dep: 'OKA', arr: 'HND', flight: 'RRA802', time_dep: '10:00', time_arr: '12:40', status: '◎', price_norm: '39,000', price_disc: '19,800' },
    { dep: 'OKA', arr: 'HND', flight: 'RRA804', time_dep: '15:00', time_arr: '17:40', status: '満席', price_norm: '42,000', price_disc: '22,800' },
    { dep: 'OKA', arr: 'HND', flight: 'RRA806', time_dep: '19:30', time_arr: '22:10', status: '◎', price_norm: '48,000', price_disc: '25,800' },
    
    // 大阪(KIX) ⇔ 沖縄(OKA)
    { dep: 'KIX', arr: 'OKA', flight: 'RRA701', time_dep: '11:00', time_arr: '13:00', status: '◎', price_norm: '35,000', price_disc: '16,800' },
    { dep: 'KIX', arr: 'OKA', flight: 'RRA703', time_dep: '16:00', time_arr: '18:00', status: '△', price_norm: '38,000', price_disc: '18,800' },
    { dep: 'OKA', arr: 'KIX', flight: 'RRA702', time_dep: '14:00', time_arr: '16:00', status: '◎', price_norm: '35,000', price_disc: '16,800' },
    { dep: 'OKA', arr: 'KIX', flight: 'RRA704', time_dep: '19:00', time_arr: '21:00', status: '◎', price_norm: '38,000', price_disc: '18,800' },
    
    // 札幌(CTS) ⇔ 沖縄(OKA)
    { dep: 'CTS', arr: 'OKA', flight: 'RRA901', time_dep: '12:30', time_arr: '16:05', status: '◎', price_norm: '45,000', price_disc: '29,800' },
    { dep: 'OKA', arr: 'CTS', flight: 'RRA902', time_dep: '10:00', time_arr: '13:35', status: '◎', price_norm: '45,000', price_disc: '29,800' },

    // 那覇(OKA) ⇔ 宮古(MMY)
    { dep: 'OKA', arr: 'MMY', flight: 'RRA101', time_dep: '09:00', time_arr: '09:50', status: '△', price_norm: '12,000', price_disc: '7,800' },
    { dep: 'OKA', arr: 'MMY', flight: 'RRA105', time_dep: '17:30', time_arr: '18:20', status: '◎', price_norm: '12,000', price_disc: '7,800' },
    { dep: 'MMY', arr: 'OKA', flight: 'RRA102', time_dep: '10:30', time_arr: '11:20', status: '◎', price_norm: '12,000', price_disc: '7,800' },
    
    // 那覇(OKA) ⇔ 石垣(ISG)
    { dep: 'OKA', arr: 'ISG', flight: 'RRA201', time_dep: '10:15', time_arr: '11:10', status: '◎', price_norm: '15,000', price_disc: '8,800' },
    { dep: 'OKA', arr: 'ISG', flight: 'RRA203', time_dep: '14:30', time_arr: '15:25', status: '△', price_norm: '15,000', price_disc: '8,800' },
    { dep: 'ISG', arr: 'OKA', flight: 'RRA204', time_dep: '16:00', time_arr: '16:55', status: '◎', price_norm: '15,000', price_disc: '8,800' },

    // 石垣(ISG) ⇔ 与那国(OGN)
    { dep: 'ISG', arr: 'OGN', flight: 'RRA301', time_dep: '14:00', time_arr: '14:35', status: '◎', price_norm: '11,000', price_disc: '6,800' },
    { dep: 'OGN', arr: 'ISG', flight: 'RRA302', time_dep: '15:15', time_arr: '15:50', status: '◎', price_norm: '11,000', price_disc: '6,800' },
];

// URLパラメータを解析する関数
function getQueryParams() {
    const params = {};
    const queryString = window.location.search.substring(1);
    const regex = /([^&=]+)=([^&]*)/g;
    let m;
    while (m = regex.exec(queryString)) {
        params[decodeURIComponent(m[1])] = decodeURIComponent(m[2]);
    }
    return params;
}

// フライトを表示するメイン関数
function displayFlights() {
    const params = getQueryParams();
    const depCode = params.dep; // そのまま dep
    const arrCode = params.arr; // そのまま arr
    // ...
    const date = params.date || '12月25日'; // 日付はダミー

    const resultsBody = document.getElementById('flight-results-body');
    const searchInfo = document.getElementById('search-info');
    let htmlContent = '';
    
    // 検索条件の表示を更新
    const depName = airportNames[depCode] || '出発地未指定';
    const arrName = airportNames[arrCode] || '到着地未指定';
    
    searchInfo.innerHTML = `
        <font size="3" color="#000080"><b>検索条件: ${date} (水) ${depName} → ${arrName}</b></font><br>
        <font size="2">（該当する便が見つからなかった場合は、下の時刻表を確認してください。）</font>
    `;

    // データをフィルタリング
    const filteredFlights = flightData.filter(flight => 
        flight.dep === depCode && flight.arr === arrCode
    );

    if (filteredFlights.length === 0) {
        htmlContent = `<tr><td colspan="9" align="center" style="padding: 20px;">
                        <font color="red"><b>ご指定の区間 (${depName} → ${arrName}) は、本日は運航しておりません。</b></font><br>
                        恐れ入りますが、別の区間または時刻表をご確認ください。
                       </td></tr>`;
    } else {
        // 結果が一つ以上ある場合は、ヘッダーを挿入
        const routeHeader = `<tr><td colspan="9" class="route-section-header">${depName} ⇔ ${arrName} 路線</td></tr>`;
        htmlContent += routeHeader;

        filteredFlights.forEach(flight => {
            const statusClass = flight.status === '◎' ? 'status-available'
                               : flight.status === '△' ? 'status-few'
                               : 'status-full';
            const buttonText = flight.status === '満席' ? '空席待ち' : '予約へ';
            const buttonStyle = flight.status === '満席' ? 'background-color:#CCCCCC;' : '';

            htmlContent += `
                <tr>
                    <td>${flight.flight}</td>
                    <td>${airportNames[flight.dep]}</td>
                    <td>${flight.time_dep}</td>
                    <td>${airportNames[flight.arr]}</td>
                    <td>${flight.time_arr}</td>
                    <td class="${statusClass}">${flight.status}</td>
                    <td class="price-box">${flight.price_norm}円</td>
                    <td class="price-box">${flight.price_disc}円</td>
                    <td><input type="button" value="${buttonText}" class="reserve-button" style="${buttonStyle}" onclick="alert('${flight.flight}便 予約画面へ進みます');"></td>
                </tr>
            `;
        });
    }

    resultsBody.innerHTML = htmlContent;
}
</script>
</body>
</html>